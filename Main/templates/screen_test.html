{% extends 'base.html' %}
{% load static %}
{% block style %}
.container{
  margin-top:120px;
}
.screen-form {
  margin-top: 20px;
}
.card{
  margin:20px 0 20px 0;
  max-width: 375px;
}
{% endblock %}
{% block content %}
<div class='container'>
  <h2>Take a Depression Test</h2>
  <h6><i>Note : These tests are not accurate. You can locate and consult a mental health expert for the accurate diagnosis.</i></h6>

<div id="formfill">
<form class="screen-form">
<fieldset class="form-group">
    <p><b>1. Little interest or pleasure in doing things</b></p>
    <div class="form-check">
      <label class="form-check-label">
        <input type="radio" class="form-check-input" name="1" id="optionsRadios1" value="10" checked>
        Rarely
      </label>
    </div>
    <div class="form-check">
    <label class="form-check-label">
        <input type="radio" class="form-check-input" name="1" id="optionsRadios2" value="20">
        Sometimes
      </label>
    </div>
    <div class="form-check">
    <label class="form-check-label">
        <input type="radio" class="form-check-input" name="1" id="optionsRadios3" value="30">
        Often
      </label>
    </div>
    <div class="form-check">
    <label class="form-check-label">
        <input type="radio" class="form-check-input" name="1" id="optionsRadios4" value="40">
        Very Often
      </label>
    </div>
  </fieldset>
</form>
  <form>
  <fieldset class="form-group">
      <p><b>2. Feeling down, depressed or hopeless</b></p>    
      <div class="form-check">
        <label class="form-check-label">
          <input type="radio" class="form-check-input" name="2" id="optionsRadios1" value="10" checked>
          Rarely
        </label>
      </div>
      <div class="form-check">
      <label class="form-check-label">
          <input type="radio" class="form-check-input" name="2" id="optionsRadios2" value="20">
          Sometimes
        </label>
      </div>
      <div class="form-check">
      <label class="form-check-label">
          <input type="radio" class="form-check-input" name="2" id="optionsRadios3" value="30">
          Often
        </label>
      </div>
      <div class="form-check">
      <label class="form-check-label">
          <input type="radio" class="form-check-input" name="2" id="optionsRadios4" value="40">
          Very Often
        </label>
      </div>
    </fieldset>
  </form>
    <form>
    <fieldset class="form-group">
        <p><b>3. Trouble falling or staying asleep, or sleeping too much</b></p>
        <div class="form-check">
          <label class="form-check-label">
            <input type="radio" class="form-check-input" name="3" id="optionsRadios1" value="10" checked>
            Rarely
          </label>
        </div>
        <div class="form-check">
        <label class="form-check-label">
            <input type="radio" class="form-check-input" name="3" id="optionsRadios2" value="20">
            Sometimes
          </label>
        </div>
        <div class="form-check">
        <label class="form-check-label">
            <input type="radio" class="form-check-input" name="3" id="optionsRadios3" value="30">
            Often
          </label>
        </div>
        <div class="form-check">
        <label class="form-check-label">
            <input type="radio" class="form-check-input" name="3" id="optionsRadios4" value="40">
            Very Often
          </label>
        </div>
      </fieldset>
    </form>
      <form>
      <fieldset class="form-group">
          <p><b>4. Feeling bad about yourself- or that you are a failure or have let yourself or your family down</b></p>
          <div class="form-check">
            <label class="form-check-label">
              <input type="radio" class="form-check-input" name="4" id="optionsRadios1" value="10" checked>
              Rarely
            </label>
          </div>
          <div class="form-check">
          <label class="form-check-label">
              <input type="radio" class="form-check-input" name="4" id="optionsRadios2" value="20">
              Sometimes
            </label>
          </div>
          <div class="form-check">
          <label class="form-check-label">
              <input type="radio" class="form-check-input" name="4" id="optionsRadios3" value="30">
              Often
            </label>
          </div>
          <div class="form-check">
          <label class="form-check-label">
              <input type="radio" class="form-check-input" name="4" id="optionsRadios4" value="40">
              Very Often
            </label>
          </div>
        </fieldset>
      </form>
        <form>
        <fieldset class="form-group">
            <p><b>5. Do you get irritable and/or easily annoyed when anxious?</b></p>          
            <div class="form-check">              
              <label class="form-check-label">
                <input type="radio" class="form-check-input" name="5" id="optionsRadios1" value="10" checked>
                Rarely
              </label>
            </div>
            <div class="form-check">
            <label class="form-check-label">
                <input type="radio" class="form-check-input" name="5" id="optionsRadios2" value="20">
                Sometimes
              </label>
            </div>
            <div class="form-check">
            <label class="form-check-label">
                <input type="radio" class="form-check-input" name="5" id="optionsRadios3" value="30">
                Often
              </label>
            </div>
            <div class="form-check">
            <label class="form-check-label">
                <input type="radio" class="form-check-input" name="5" id="optionsRadios4" value="40">
                Very Often
              </label>
            </div>
          </fieldset>
        </form>
          <form>
          <fieldset class="form-group">
              <p><b>6. Thoughts that you would be better off dead, or of hurting yourself</b></p>            
              <div class="form-check">                
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="6" id="optionsRadios1" value="10" checked>
                  Rarely
                </label>
              </div>
              <div class="form-check">
              <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="6" id="optionsRadios2" value="20">
                  Sometimes
                </label>
              </div>
              <div class="form-check">
              <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="6" id="optionsRadios3" value="30">
                  Often
                </label>
              </div>
              <div class="form-check">
              <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="6" id="optionsRadios4" value="40">
                  Very Often
                </label>
              </div>
            </fieldset>
          </form>
            <form>
            <fieldset class="form-group">
                <p><b>7. If you've had any days with issues above, how difficult have these problems made it for you at work, home, school, or with other people?</b></p>              
                <div class="form-check">                  
                  <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="7" id="optionsRadios1" value="10" checked>
                    Rarely
                  </label>
                </div>
                <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="7" id="optionsRadios2" value="20">
                    Sometimes
                  </label>
                </div>
                <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="7" id="optionsRadios3" value="30">
                    Often
                  </label>
                </div>
                <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="7" id="optionsRadios4" value="40">
                    Very Often
                  </label>
                </div>
              </fieldset>
            </form>

        <form>
            <fieldset class="form-group">
                <p><b>8. I actively keep in touch with friends and family.</b></p>              
                <div class="form-check">                  
                  <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="8" id="optionsRadios1" value="10" checked>
                    Rarely
                  </label>
                </div>
                <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="8" id="optionsRadios2" value="20">
                    Sometimes
                  </label>
                </div>
                <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="8" id="optionsRadios3" value="30">
                    Often
                  </label>
                </div>
                <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="8" id="optionsRadios4" value="40">
                    Very Often
                  </label>
                </div>
              </fieldset>
            </form>

        <form>
            <fieldset class="form-group">
                <p><b>9. When things are tough, I reach out for support.</b></p>              
                <div class="form-check">                  
                  <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="9" id="optionsRadios1" value="10" checked>
                    Rarely
                  </label>
                </div>
                <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="9" id="optionsRadios2" value="20">
                    Sometimes
                  </label>
                </div>
                <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="9" id="optionsRadios3" value="30">
                    Often
                  </label>
                </div>
                <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="9" id="optionsRadios4" value="40">
                    Very Often
                  </label>
                </div>
              </fieldset>
            </form>
      <form>
            <fieldset class="form-group">
                <p><b>10. Do you experience repetitive and persistent thoughts that are upsetting and unwanted?</b></p>              
                <div class="form-check">                  
                  <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="10" id="optionsRadios1" value="10" checked>
                    Rarely
                  </label>
                </div>
                <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="10" id="optionsRadios2" value="20">
                    Sometimes
                  </label>
                </div>
                <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="10" id="optionsRadios3" value="30">
                    Often
                  </label>
                </div>
                <div class="form-check">
                <label class="form-check-label">
                    <input type="radio" class="form-check-input" name="10" id="optionsRadios4" value="40">
                    Very Often
                  </label>
                </div>
              </fieldset>
            </form>
   <button type="submit" class="btn btn-primary srceenTest" id="srceenTest">Submit</button>
  </div>

   <div id="piechart"></div>
  <div class="card1">
     <div class="card1-body">
    
   <span id="Score"></span>
   <span id="deptype"></span>
  </div>
  </div>
<!-- <a href="{% url 'tips' %}"><button class="btn btn-info" id="tip" hidden="true">See some tips</button></a> -->

</div>
{% endblock %}
{% block script %}
<script>
document.getElementById('srceenTest').addEventListener('click',function(){
  var score = [];
  for(i=1;i<=10;i++){
    let t = document.getElementsByName(String(i));
    t.forEach(radio=>{if(radio.checked) score.push(parseInt(radio.value))});
  }
  console.log(score);
  const sumScore = (accumulator, currentValue) => accumulator + currentValue;
  const min  = 100;
  const max = 400;
  const total =score.reduce(sumScore);
  console.log(total);
  const finalScore= ((total-min)/(max-min))*100;
  console.log(parseInt(finalScore));
  {% comment %} var quiz = document.getElementById("formfill");
  quiz.style.display="none"; {% endcomment %}
  var dep;
  if(finalScore<=20)dep="Normal Condition";
  else if(finalScore>20 && finalScore<=50)dep="Mild Depression";
  else if(finalScore>50 && finalScore<=75)dep="Moderate Depression";
  else if(finalScore>75 && finalScore<=100)dep="Severe Depression";
  
  document.getElementById('formfill').innerHTML="";
 
  document.getElementById('Score').innerHTML ='The Percentage shows level of Depression : '+String(parseInt(finalScore))+'%';
  document.getElementById('deptype').innerHTML = dep;

google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);

// Draw the chart and set the chart values
function drawChart() {
var k=finalScore;
  var data = google.visualization.arrayToDataTable([
  ['Task', 'Depression Percent'],
  ['Your Percentage', k],
  ['Rest', 100-k],
  
]);

  // Optional; add a title and set the width and height of the chart
  var options = {'title':'DEPRESSION LEVEL', 'width':550, 'height':400};

  // Display the chart inside the <div> element with id="piechart"
  var chart = new google.visualization.PieChart(document.getElementById('piechart'));
  chart.draw(data, options);
}
  
})
document.getElementById('tip').hidden=false;
</script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
{% endblock %}
